#!/bin/sh

# Watermarker for kindle screen savers.
#
# Watermark all of the images in this directory with the
# text passed in as the first arg. The watermark is placed
# at the bottom of the image onto a grey background.
#
# Assumes all images are 800x600. If smaller will skip the 
# image with a message about geometry not containing image.
# Requires imagemagick is installed.

for file in *.png *.jpg; do
	if [ -f $file ]; then
    	convert										\
        	-region 600x30+0+770					\
        	-modulate 50							\
        	-pointsize 25 -weight bold -fill \#ccc 	\
        	-annotate +25+795 "$1" 					\
        	$file watermarked-$file;
	fi
done
